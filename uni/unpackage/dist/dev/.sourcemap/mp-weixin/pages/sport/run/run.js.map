{"version":3,"sources":["uni-app:///main.js","webpack:///D:/sportUni/uni/pages/sport/run/run.vue?be89","webpack:///D:/sportUni/uni/pages/sport/run/run.vue?99ea","webpack:///D:/sportUni/uni/pages/sport/run/run.vue?fa26","webpack:///D:/sportUni/uni/pages/sport/run/run.vue?b85e","uni-app:///pages/sport/run/run.vue","webpack:///D:/sportUni/uni/pages/sport/run/run.vue?793c","webpack:///D:/sportUni/uni/pages/sport/run/run.vue?9e0b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","isRunning","currentLocation","latitude","longitude","path","polyline","distance","speed","duration","calories","timer","startTime","lastUpdate","weight","methods","toggleRunning","startRunning","pauseRunning","clearInterval","trackLocation","uni","type","success","parseFloat","toFixed","points","color","width","fail","console","calculateDistance","Math","formatDuration","onRegionChange","onMapUpdated","onLoad","onUnload"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,YAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AAChH;AACuD;AACL;AACa;;;AAG/D;AACsM;AACtM,gBAAgB,6MAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,8EAAM;AACR,EAAE,uFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA+wB,CAAgB,6wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCuBnyB;EACAC;IACA;MACAC;MAAA;MACAC;QACAC;QACAC;MACA;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;;MAEA;MACA;IACA;IACA;IACAC;MACA;MACAC;MACA;IACA;IACA;IACAC;MAAA;MACAC;QACAC;QACAC;UACA;YAAApB;YAAAC;UAAA;UACA;UAEA;YACA;YACA;YACA;;YAEA;YACA;cACA,kBACAoB,8CACAC;;cAEA;;cAEA;cACA;cACA;cACA;cAEA,kBACAD,6CACAC;;cAEA;cACA,kBACA;gBACAC;gBACAC;gBACAC;cACA,EACA;YACA;UACA;YACA;YACA;UACA;UAEA;;UAEA;UACA;UACA;;UAEA;UACA;QACA;QACAC;UACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA,QACAC,kDACAA,oBACAA,oBACAA,yBACAA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA,qBACAD,qCACA;MACA;MACA;IACA;IACAE;MACA;IAAA,CACA;IACAC;MACA;IAAA;EAEA;EACAC;IAAA;IACA;IACAf;MACAC;MACAC;QACA;UACApB;UACAC;QACA;MACA;IACA;EACA;EACAiC;IACA;IACA;MACAlB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjLA;AAAA;AAAA;AAAA;AAAwmC,CAAgB,kkCAAG,EAAC,C;;;;;;;;;;;ACA5nC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/sport/run/run.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/sport/run/run.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./run.vue?vue&type=template&id=1783687a&\"\nvar renderjs\nimport script from \"./run.vue?vue&type=script&lang=js&\"\nexport * from \"./run.vue?vue&type=script&lang=js&\"\nimport style0 from \"./run.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/sport/run/run.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=template&id=1783687a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 地图组件 -->\r\n\t\t<map id=\"map\" class=\"map\" :longitude=\"currentLocation.longitude\" :latitude=\"currentLocation.latitude\"\r\n\t\t\t:polyline=\"polyline\" @regionchange=\"onRegionChange\" @updated=\"onMapUpdated\">\r\n\t\t\t<!-- 开始/暂停按钮 -->\r\n\t\t\t<button class=\"start-btn\" @click=\"toggleRunning\">\r\n\t\t\t\t{{ isRunning ? '暂停跑步' : '开始跑步' }}\r\n\t\t\t</button>\r\n\t\t\t<view class=\"start-btn \" style=\"bottom: 40px; background-color: skyblue;\" v-if=\"isRunning\">时间:\r\n\t\t\t\t{{ duration }}</view>\r\n\t\t</map>\r\n\r\n\t\t<!-- 信息栏 -->\r\n\t\t<view class=\"info-bar\">\r\n\t\t\t<view class=\"info-item\">时速: {{ speed }} km/h</view>\r\n\t\t\t<view class=\"info-item\">公里数: {{ distance }} km</view>\r\n\t\t\t<view class=\"info-item\">卡路里: {{ calories }} k</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisRunning: false, // 跑步状态\r\n\t\t\t\tcurrentLocation: {\r\n\t\t\t\t\tlatitude: 0,\r\n\t\t\t\t\tlongitude: 0\r\n\t\t\t\t}, // 当前定位\r\n\t\t\t\tpath: [], // 跑步轨迹\r\n\t\t\t\tpolyline: [], // 地图轨迹绘制\r\n\t\t\t\tdistance: 0, // 总公里数\r\n\t\t\t\tspeed: 0, // 当前速度\r\n\t\t\t\tduration: '00:00:00',\r\n\t\t\t\tcalories: 0, // 总时长\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tstartTime: null,\r\n\t\t\t\tlastUpdate: null,\r\n\t\t\t\tweight: 70,\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 切换跑步状态\r\n\t\t\ttoggleRunning() {\r\n\t\t\t\tif (!this.isRunning) {\r\n\t\t\t\t\tthis.startRunning();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.pauseRunning();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 开始跑步\r\n\t\t\tstartRunning() {\r\n\t\t\t\tthis.isRunning = true;\r\n\t\t\t\tthis.startTime = Date.now();\r\n\t\t\t\tthis.lastUpdate = this.startTime;\r\n\r\n\t\t\t\t// 获取实时位置\r\n\t\t\t\tthis.timer = setInterval(this.trackLocation, 1000);\r\n\t\t\t},\r\n\t\t\t// 暂停跑步\r\n\t\t\tpauseRunning() {\r\n\t\t\t\tthis.isRunning = false;\r\n\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\tthis.timer = null;\r\n\t\t\t},\r\n\t\t\t// 实时获取位置\r\n\t\t\ttrackLocation() {\r\n\t\t\t  uni.getLocation({\r\n\t\t\t    type: 'gcj02',\r\n\t\t\t    success: (res) => {\r\n\t\t\t      const newPoint = { latitude: res.latitude, longitude: res.longitude };\r\n\t\t\t      const now = Date.now();\r\n\t\t\t\r\n\t\t\t      if (this.path.length > 0) {\r\n\t\t\t        const lastPoint = this.path[this.path.length - 1];\r\n\t\t\t        const timeDiff = (now - this.lastUpdate) / 1000; // 秒\r\n\t\t\t        const distance = this.calculateDistance(lastPoint, newPoint);\r\n\t\t\t\r\n\t\t\t        // 如果移动距离大于 5 米，更新相关数据\r\n\t\t\t        if (distance > 5) {\r\n\t\t\t          this.distance = (\r\n\t\t\t            parseFloat(this.distance) + distance / 1000\r\n\t\t\t          ).toFixed(2); // 转换为公里并保留两位小数\r\n\t\t\t\r\n\t\t\t          this.speed = (distance / timeDiff * 3.6).toFixed(2); // m/s 转 km/h，保留两位小数\r\n\t\t\t\r\n\t\t\t          // 卡路里消耗计算（使用 MET * 体重 * 时间）\r\n\t\t\t          const met = 9.8; // 跑步的 MET 值\r\n\t\t\t          const timeInHours = timeDiff / 3600; // 时间从秒转换为小时\r\n\t\t\t          const caloriesBurned = met * this.weight * timeInHours;\r\n\t\t\t\r\n\t\t\t          this.calories = (\r\n\t\t\t            parseFloat(this.calories) + caloriesBurned\r\n\t\t\t          ).toFixed(2); // 保留两位小数\r\n\t\t\t\r\n\t\t\t          this.path.push(newPoint);\r\n\t\t\t          this.polyline = [\r\n\t\t\t            {\r\n\t\t\t              points: this.path,\r\n\t\t\t              color: '#FF0000DD',\r\n\t\t\t              width: 5,\r\n\t\t\t            },\r\n\t\t\t          ];\r\n\t\t\t        }\r\n\t\t\t      } else {\r\n\t\t\t        // 第一次更新位置\r\n\t\t\t        this.path.push(newPoint);\r\n\t\t\t      }\r\n\t\t\t\r\n\t\t\t      this.lastUpdate = now;\r\n\t\t\t\r\n\t\t\t      // 更新时间\r\n\t\t\t      const elapsed = now - this.startTime;\r\n\t\t\t      this.duration = this.formatDuration(elapsed);\r\n\t\t\t\r\n\t\t\t      // 更新当前位置\r\n\t\t\t      this.currentLocation = newPoint;\r\n\t\t\t    },\r\n\t\t\t    fail: (err) => {\r\n\t\t\t      console.error('获取定位失败:', err);\r\n\t\t\t    },\r\n\t\t\t  });\r\n\t\t\t},\r\n\r\n\t\t\t// 计算两点间距离\r\n\t\t\tcalculateDistance(point1, point2) {\r\n\t\t\t\tconst radLat1 = (point1.latitude * Math.PI) / 180;\r\n\t\t\t\tconst radLat2 = (point2.latitude * Math.PI) / 180;\r\n\t\t\t\tconst deltaLat = radLat2 - radLat1;\r\n\t\t\t\tconst deltaLng = ((point2.longitude - point1.longitude) * Math.PI) / 180;\r\n\t\t\t\tconst a =\r\n\t\t\t\t\tMath.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +\r\n\t\t\t\t\tMath.cos(radLat1) *\r\n\t\t\t\t\tMath.cos(radLat2) *\r\n\t\t\t\t\tMath.sin(deltaLng / 2) *\r\n\t\t\t\t\tMath.sin(deltaLng / 2);\r\n\t\t\t\tconst c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t\t\t\tconst distance = 6378137 * c; // 地球半径 (m)\r\n\t\t\t\treturn distance;\r\n\t\t\t},\r\n\t\t\t// 格式化时间\r\n\t\t\tformatDuration(milliseconds) {\r\n\t\t\t\tconst totalSeconds = Math.floor(milliseconds / 1000);\r\n\t\t\t\tconst hours = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');\r\n\t\t\t\tconst minutes = String(\r\n\t\t\t\t\tMath.floor((totalSeconds % 3600) / 60)\r\n\t\t\t\t).padStart(2, '0');\r\n\t\t\t\tconst seconds = String(totalSeconds % 60).padStart(2, '0');\r\n\t\t\t\treturn `${hours}:${minutes}:${seconds}`;\r\n\t\t\t},\r\n\t\t\tonRegionChange() {\r\n\t\t\t\t// 视野变化时的事件处理\r\n\t\t\t},\r\n\t\t\tonMapUpdated() {\r\n\t\t\t\t// 地图更新事件\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// 初始化定位\r\n\t\t\tuni.getLocation({\r\n\t\t\t\ttype: 'gcj02',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.currentLocation = {\r\n\t\t\t\t\t\tlatitude: res.latitude,\r\n\t\t\t\t\t\tlongitude: res.longitude,\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\t// 清理定时器\r\n\t\t\tif (this.timer) {\r\n\t\t\t\tclearInterval(this.timer);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t}\r\n\r\n\t.map {\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.info-bar {\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 10px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tborder-top: 1px solid #eee;\r\n\t}\r\n\r\n\t.info-item {\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.start-btn {\r\n\t\tposition: absolute;\r\n\t\tbottom: 80px;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tpadding: 10px 20px;\r\n\t\tbackground-color: #ff5722;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 20px;\r\n\t}\r\n</style>","import mod from \"-!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734785026875\n      var cssReload = require(\"D:/HBuilderX.4.42.2024121808-alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}